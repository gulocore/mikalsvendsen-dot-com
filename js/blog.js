(()=>{var g=()=>({init(){console.log("\u{1F4DD} Blog list keyboard navigation initialized"),this.setupGlobalArrowKeyListener(),this.$nextTick(()=>{this.restorePreviousFocus()})},restorePreviousFocus(){try{let e=sessionStorage.getItem("blogCardFocus");if(!e)return;let t=JSON.parse(e),{postSlug:r}=t,s=Array.from(this.$el.querySelectorAll(".blog-card-link")).find(n=>n.href.includes(r));s&&(console.log("\u{1F4DD} Restoring focus to previously visited blog post:",r),s.focus({preventScroll:!0}),setTimeout(()=>{let n=s.getBoundingClientRect();n.top>=0&&n.bottom<=window.innerHeight||s.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"})},50))}catch(e){console.warn("\u{1F4DD} Error restoring blog card focus:",e),sessionStorage.removeItem("blogCardFocus")}},clearFocusTarget(){try{sessionStorage.removeItem("blogCardFocus"),console.log("\u{1F4DD} Cleared blog card focus target")}catch(e){console.warn("\u{1F4DD} Could not clear focus target:",e)}},setupGlobalArrowKeyListener(){document.addEventListener("keydown",e=>{if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key))return;let t=Array.from(this.$el.querySelectorAll(".blog-card-link"));if(t.length===0||t.find(c=>c===document.activeElement))return;let o=document.activeElement,s=o&&o.closest(".navbar"),n=o&&o.closest(".qa-items"),a=o&&["INPUT","TEXTAREA","SELECT"].includes(o.tagName);s||n||a||(console.log("\u{1F4DD} Arrow key pressed outside blog grid, focusing last blog card"),e.preventDefault(),t[0].focus({preventScroll:!0}))})},announceToScreenReader(e){let t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.className="sr-only",t.textContent=e,document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},1e3)},handleGlobalKeydown(e){let t=Array.from(this.$el.querySelectorAll(".blog-card-link")),r=t.findIndex(n=>n===document.activeElement);if(e.key==="Escape"){e.preventDefault(),this.clearFocusTarget(),r!==-1?(t[r].blur(),console.log("\u{1F4DD} Escape pressed: cleared focus and blurred current card")):console.log("\u{1F4DD} Escape pressed: cleared stored focus target"),this.announceToScreenReader("Blog navigation focus cleared");return}if(r===-1||!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End"].includes(e.key))return;let s;switch(e.key){case"ArrowDown":e.preventDefault(),s=this.getGridPosition(t,r,"down"),this.focusCard(t[s]);break;case"ArrowUp":e.preventDefault(),s=this.getGridPosition(t,r,"up"),this.focusCard(t[s]);break;case"ArrowRight":e.preventDefault(),s=this.getGridPosition(t,r,"right"),this.focusCard(t[s]);break;case"ArrowLeft":e.preventDefault(),s=this.getGridPosition(t,r,"left"),this.focusCard(t[s]);break;case"Home":e.preventDefault(),this.focusCard(t[0]);break;case"End":e.preventDefault(),this.focusCard(t[t.length-1]);break}},getGridPosition(e,t,r){let o=this.$el.querySelector(".blog-posts-grid"),s=e[t].closest(".blog-card"),n=this.calculateCardsPerRow(e),a=Math.floor(t/n),c=t%n,d=Math.ceil(e.length/n),i=a,l=c;switch(r){case"right":l=c+1,(l>=n||a*n+l>=e.length)&&(i=(a+1)%d,l=0);break;case"left":if(l=c-1,l<0){i=(a-1+d)%d;let u=i*n;l=Math.min(n,e.length-u)-1}break;case"down":if(i=a+1,i>=d&&(i=0),i*n+l>=e.length){let u=e.length-i*n;l=Math.max(0,u-1)}break;case"up":if(i=a-1,i<0&&(i=d-1,i*n+l>=e.length))return e.length-1;break}let h=i*n+l;return Math.min(h,e.length-1)},calculateCardsPerRow(e){if(e.length<=1)return 1;let r=e[0].closest(".blog-card").getBoundingClientRect().top;for(let o=1;o<e.length;o++){let s=e[o].closest(".blog-card").getBoundingClientRect().top;if(Math.abs(s-r)>10)return o}return e.length},focusCard(e){e&&(e.focus({preventScroll:!0}),setTimeout(()=>{let t=e.getBoundingClientRect(),r=window.innerHeight;t.top>=0&&t.bottom<=r||e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},10))}});var f=(e,t)=>({postUrl:e,postTitle:t,init(){this.postTitle&&this.$el.setAttribute("aria-label",`Read blog post: ${this.postTitle}`)},handleClick(r){},handleFocus(){this.announceToScreenReader(`Focused on blog post: ${this.postTitle||"Untitled"}`)},announceToScreenReader(r){let o=document.createElement("div");o.setAttribute("aria-live","polite"),o.setAttribute("aria-atomic","true"),o.className="sr-only",o.textContent=r,document.body.appendChild(o),setTimeout(()=>{document.body.contains(o)&&document.body.removeChild(o)},1e3)},get ariaLabel(){return`Blog post: ${this.postTitle||"Untitled"}. Press Enter to read.`}});console.log("\u{1F4DD} Loading blog bundle...");function b(){typeof window.Alpine<"u"?(console.log("\u{1F527} Registering blog components..."),window.Alpine.data("blogList",g),window.Alpine.data("blogCard",f),console.log("\u2705 Blog components registered"),window.blogComponentsReady=!0):(console.warn("\u26A0\uFE0F Alpine.js not yet available, retrying blog registration..."),setTimeout(b,50))}b();console.log("\u{1F4DD} Blog bundle loaded");})();
