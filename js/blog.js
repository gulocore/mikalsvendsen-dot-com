(()=>{var g=()=>({init(){this.setupGlobalArrowKeyListener(),this.$nextTick(()=>{this.restorePreviousFocus()})},restorePreviousFocus(){try{let e=sessionStorage.getItem("blogCardFocus");if(!e)return;let t=JSON.parse(e),{postSlug:r}=t,n=Array.from(this.$el.querySelectorAll(".blog-card-link")).find(s=>s.href.includes(r));n&&(n.focus({preventScroll:!0}),setTimeout(()=>{n.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100))}catch{sessionStorage.removeItem("blogCardFocus")}},clearFocusTarget(){try{sessionStorage.removeItem("blogCardFocus")}catch{}},setupGlobalArrowKeyListener(){document.addEventListener("keydown",e=>{if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key))return;let t=Array.from(this.$el.querySelectorAll(".blog-card-link"));if(t.length===0||t.find(c=>c===document.activeElement))return;let o=document.activeElement,n=o&&o.closest(".sidebar"),s=o&&o.closest(".qa-items"),a=o&&["INPUT","TEXTAREA","SELECT"].includes(o.tagName);if(n||s||a)return;e.preventDefault(),t[t.length-1].focus({preventScroll:!0});let d=new KeyboardEvent("keydown",{key:e.key,bubbles:!0,cancelable:!0});this.$el.dispatchEvent(d)})},announceToScreenReader(e){let t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.className="sr-only",t.textContent=e,document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},1e3)},handleGlobalKeydown(e){let t=Array.from(this.$el.querySelectorAll(".blog-card-link")),r=t.findIndex(s=>s===document.activeElement);if(e.key==="Escape"){e.preventDefault(),this.clearFocusTarget(),r!==-1&&t[r].blur(),this.announceToScreenReader("Blog navigation focus cleared");return}if(r===-1||!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End"].includes(e.key))return;let n;switch(e.key){case"ArrowDown":e.preventDefault(),n=this.getGridPosition(t,r,"down"),this.focusCard(t[n]);break;case"ArrowUp":e.preventDefault(),n=this.getGridPosition(t,r,"up"),this.focusCard(t[n]);break;case"ArrowRight":e.preventDefault(),n=this.getGridPosition(t,r,"right"),this.focusCard(t[n]);break;case"ArrowLeft":e.preventDefault(),n=this.getGridPosition(t,r,"left"),this.focusCard(t[n]);break;case"Home":e.preventDefault(),this.focusCard(t[0]);break;case"End":e.preventDefault(),this.focusCard(t[t.length-1]);break}},getGridPosition(e,t,r){let o=this.$el.querySelector(".blog-posts-grid"),n=e[t].closest(".blog-card"),s=this.calculateCardsPerRow(e),a=Math.floor(t/s),d=t%s,c=Math.ceil(e.length/s),i=a,l=d;switch(r){case"right":l=d+1,(l>=s||a*s+l>=e.length)&&(i=(a+1)%c,l=0);break;case"left":if(l=d-1,l<0){i=(a-1+c)%c;let u=i*s;l=Math.min(s,e.length-u)-1}break;case"down":if(i=a+1,i>=c&&(i=0),i*s+l>=e.length){let u=e.length-i*s;l=Math.max(0,u-1)}break;case"up":if(i=a-1,i<0&&(i=c-1,i*s+l>=e.length))return e.length-1;break}let h=i*s+l;return Math.min(h,e.length-1)},calculateCardsPerRow(e){if(e.length<=1)return 1;let r=e[0].closest(".blog-card").getBoundingClientRect().top;for(let o=1;o<e.length;o++){let n=e[o].closest(".blog-card").getBoundingClientRect().top;if(Math.abs(n-r)>10)return o}return e.length},focusCard(e){e&&(e.focus(),e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}))}});var f=(e,t)=>({postUrl:e,postTitle:t,init(){this.postTitle&&this.$el.setAttribute("aria-label",`Read blog post: ${this.postTitle}`)},handleClick(r){},handleFocus(){this.announceToScreenReader(`Focused on blog post: ${this.postTitle||"Untitled"}`)},announceToScreenReader(r){let o=document.createElement("div");o.setAttribute("aria-live","polite"),o.setAttribute("aria-atomic","true"),o.className="sr-only",o.textContent=r,document.body.appendChild(o),setTimeout(()=>{document.body.contains(o)&&document.body.removeChild(o)},1e3)},get ariaLabel(){return`Blog post: ${this.postTitle||"Untitled"}. Press Enter to read.`}});function b(){typeof window.Alpine<"u"?(window.Alpine.data("blogList",g),window.Alpine.data("blogCard",f),window.blogComponentsReady=!0):setTimeout(b,50)}b();})();
